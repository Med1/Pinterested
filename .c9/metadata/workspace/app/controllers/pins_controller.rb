{"filter":false,"title":"pins_controller.rb","tooltip":"/app/controllers/pins_controller.rb","undoManager":{"mark":35,"position":35,"stack":[[{"group":"doc","deltas":[{"start":{"row":56,"column":3},"end":{"row":57,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":0},"end":{"row":57,"column":1},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":1},"end":{"row":57,"column":2},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":2},"end":{"row":57,"column":3},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":3},"end":{"row":58,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":3},"end":{"row":57,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":58,"column":3},"action":"remove","lines":["class PinsController < ApplicationController","  before_action :set_pin, only: [:show, :edit, :update, :destroy]","  before_action :authenticate_user!, except: [:index, :show]","  before_action :correct_user, only: [:edit, :update, :destroy]","  ","  respond_to :html","","  def index","    @pins = Pin.all","  end","  ","  def show","  end","","  def new","    @pin = current_user.pins.build","  end","","  def edit","  end","","  def create","    @pin = current_user_pins_build(pin_params)","    if @pin.save","      redirect_to @pin, notice: \"Pin was successfully created.\"","    else","      render action: 'new'","    end","  end","","  def update","    if @pin.update(pin_params)","      redirect_to @pin, notice: \"Pin was successfully updated.\"","    else","      render action: 'edit'","    end","  end","","  def destroy","    @pin.destroy","    redirect_to pins_url","  end","","  private","    def set_pin","      @pin = Pin.find(params[:id])","    end","","    def pin_params","      params.require(:pin).permit(:description, :image)","    end","end","","  def correct_user","      @pin = current_user.pins.find_by(id: params[:id])","      redirect_to pins_path, notice: \"Not authorized to edit this pin\" if @pin.nil?","end","","end"]},{"start":{"row":0,"column":0},"end":{"row":3,"column":8},"action":"insert","lines":[" <div class=\"form-group\">","    <%= f.label :description %><br>","    <%= f.text_field :description, class: 'form-control' %>","  </div>"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":5,"column":2},"action":"remove","lines":[" <div class=\"form-group\">","    <%= f.label :description %><br>","    <%= f.text_field :description, class: 'form-control' %>","  </div>","","  "]},{"start":{"row":0,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["class PinsController < ApplicationController","  before_action :set_pin, only: [:show, :edit, :update, :destroy]","  before_action :authenticate_user!, except: [:index, :show]","  before_action :correct_user, only: [:edit, :update, :destroy] ","","  respond_to :html","","  def index","    @pins = Pin.all","  end","","  def show","  end","","  def new","    @pin = current_user.pins.build","  end","","  def edit","  end","","  def create","    @pin = current_user.pins.build(pin_params)","    if @pin.save","      redirect_to @pin, notice: 'Pin was successfully created.'","    else","      render action: 'new'","    end","  end","","  def update","   if @pin.update(pin_params)","      redirect_to @pin, notice: 'Pin was successfully updated.'","    else","      render action: 'edit'","    end","  end","","  def destroy","    @pin.destroy","    redirect_to pins_url","  end","","  private","    def set_pin","      @pin = Pin.find(params[:id])","    end","","    def pin_params","      params.require(:pin).permit(:description)","    end","","","  def correct_user","      @pin = current_user.pins.find_by(id: params[:id])","      redirect_to pins_path, notice: \"Not authorized to edit this pin\" if @pin.nil?","  end","","end "]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":46},"end":{"row":49,"column":47},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":47},"end":{"row":49,"column":48},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":48},"end":{"row":49,"column":49},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":49},"end":{"row":49,"column":50},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":50},"end":{"row":49,"column":51},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":51},"end":{"row":49,"column":52},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":52},"end":{"row":49,"column":53},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":53},"end":{"row":49,"column":54},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":7},"end":{"row":51,"column":0},"action":"insert","lines":["",""]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":4},"end":{"row":52,"column":0},"action":"insert","lines":["",""]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":4},"end":{"row":54,"column":4},"action":"insert","lines":[" def pin_params","   params.require(:pin).permit(:description, :image, :name)"," end"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":54},"end":{"row":49,"column":55},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":55},"end":{"row":49,"column":56},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":56},"end":{"row":49,"column":57},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":57},"end":{"row":49,"column":58},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":58},"end":{"row":49,"column":59},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":59},"end":{"row":49,"column":60},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":60},"end":{"row":49,"column":61},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":0},"end":{"row":54,"column":4},"action":"remove","lines":["     def pin_params","   params.require(:pin).permit(:description, :image, :name)"," end"]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":0},"end":{"row":54,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":0},"end":{"row":53,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":4},"end":{"row":52,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":4},"end":{"row":8,"column":19},"action":"remove","lines":["@pins = Pin.all"]},{"start":{"row":8,"column":4},"end":{"row":8,"column":44},"action":"insert","lines":["@pins = Pin.all.order(\"created_at DESC\")"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":44},"end":{"row":8,"column":53},"action":"insert","lines":["</strong>"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":44},"end":{"row":8,"column":53},"action":"remove","lines":["</strong>"]},{"start":{"row":8,"column":44},"end":{"row":8,"column":93},"action":"insert","lines":[".paginate(:page => params[:page], :per_page => 8)"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":91},"end":{"row":8,"column":92},"action":"remove","lines":["8"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":91},"end":{"row":8,"column":92},"action":"insert","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":92},"end":{"row":8,"column":93},"action":"insert","lines":["0"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":8,"column":93},"end":{"row":8,"column":93},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1430890751320,"hash":"84bd76dd12adbd813a810e87c2cb114dbaec3de4"}